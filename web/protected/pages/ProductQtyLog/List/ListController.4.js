var PageJs=new Class.create;PageJs.prototype=Object.extend(new CRUDPageJs,{_getTitleRowData:function(){return{stockOnHand:"Stock on Hand",stockOnHandVar:"stockOnHandVar",totalOnHandValue:"Total On Hand Value",totalOnHandValueVar:"totalOnHandValueVar",totalInPartsValue:"Total In PartsValue",totalInPartsValueVar:"totalInPartsValueVar",stockOnOrder:"Stock On Order",stockOnOrderVar:"stockOnOrderVar",stockOnPO:"Stock On PO",stockOnPOVar:"stockOnPOVar",stockInParts:"Stock In Parts",stockInPartsVar:"stockInPartsVar",stockInRMA:"Stock In RMA",stockInRMAVar:"stockInRMAVar",comments:"Comments",type:"Type",created:"Date",product:{name:"Product",sku:"sku"}}},setPreData:function(e,t,n){var o={};return o.me=this,o.from=e||!1,o.to=t||!1,o.productId=n||!1,o.from!==!1&&($("searchDiv").down('[search_field="pql.createdDate_from"]').value=o.from.replace(/["']/g,"")),o.to!==!1&&($("searchDiv").down('[search_field="pql.createdDate_to"]').value=o.to.replace(/["']/g,"")),o.productId!==!1&&($("searchDiv").down('[search_field="pql.product"]').value=o.productId.replace(/["']/g,"")),(o.from||o.to||o.productId)&&$("searchPanel").down("#searchBtn").click(),o.me},_openProductDetailPage:function(e){var t={};return t.me=this,t.newWindow=window.open("/products/"+e+".html","Product Details","width=1920, location=no, scrollbars=yes, menubar=no, status=no, titlebar=no, fullscreen=no, toolbar=no"),t.newWindow.focus(),t.me},_bindSearchKey:function(){var e={};return e.me=this,$$("#searchBtn").first().observe("click",function(){$$("#showSearch").first().checked?e.me.getSearchCriteria().getResults(!0,e.me._pagination.pageSize):$$("#showSearch").first().click()}),$("searchDiv").getElementsBySelector("[search_field]").each(function(t){t.observe("keydown",function(t){e.me.keydown(t,function(){$("searchPanel").down("#searchBtn").click()})})}),this},_getEditPanel:function(e){var t={};return t.me=this,t.newDiv=new Element("tr",{"class":"save-item-panel info"}).store("data",e).insert({bottom:new Element("input",{type:"hidden","save-item-panel":"id",value:e.id?e.id:""})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{required:!0,"class":"form-control",placeholder:"The name of the Prefer Location Type","save-item-panel":"name",value:e.name?e.name:""})})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{"class":"form-control",placeholder:"Optional - The description of the Prefer Location Type","save-item-panel":"description",value:e.description?e.description:""})})}).insert({bottom:new Element("td",{"class":"text-right"}).insert({bottom:new Element("span",{"class":"btn-group btn-group-sm"}).insert({bottom:new Element("span",{"class":"btn btn-success",title:"Save"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-ok"})}).observe("click",function(){t.btn=this,t.me._saveItem(t.btn,$(t.btn).up(".save-item-panel"),"save-item-panel")})}).insert({bottom:new Element("span",{"class":"btn btn-danger",title:"Delete"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove"})}).observe("click",function(){e.id?$(this).up(".save-item-panel").replace(t.me._getResultRow(e).addClassName("item_row").writeAttribute("item_id",e.id)):$(this).up(".save-item-panel").remove()})})})}),t.newDiv},getTypeName:function(e){switch(e){case"P":return"PO";case"S":return"Sales Order";case"AD":return"Stock Adjustment";case"SI":return"Internal Stock movement";case"Type":return e;default:return"Invalid type!"}},_loadDataPicker:function(){return $$(".datepicker").each(function(e){new Prado.WebUI.TDatePicker({ID:e,InputMode:"TextBox",Format:"yyyy-MM-dd 00:00:00",FirstDayOfWeek:1,CalendarStyle:"default",FromYear:2009,UpToYear:2024,PositionMode:"Bottom",ClassName:"datepicker-layer-fixer"})}),this},getNumber:function(e){var t={};return t.me=this,t.theNumber=t.me.getValueFromCurrency(e),t.theNumber>0?"+"+t.theNumber:t.theNumber.toString()},_getResultRow:function(e,t){var n={};return n.me=this,n.tag=n.isTitle===!0?"th":"td",n.isTitle=t||!1,n.row=new Element("tr",{"class":n.isTitle===!0?"":"btn-hide-row"}).store("data",e).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(e.created)}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(e.product.sku).observe("dblclick",function(){n.me._openProductDetailPage(e.product.id)})}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(e.product.name).observe("dblclick",function(){n.me._openProductDetailPage(e.product.id)})}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.me.getTypeName(e.type))}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.stockOnHand:e.stockOnHand+"("+n.me.getNumber(e.stockOnHandVar)+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.stockOnOrder:e.stockOnOrder+"("+n.me.getNumber(e.stockOnOrderVar)+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.stockInParts:e.stockInParts+"("+n.me.getNumber(e.stockInPartsVar)+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.stockOnPO:e.stockOnPO+"("+n.me.getNumber(e.stockOnPOVar)+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.stockInRMA:e.stockInRMA+"("+n.me.getNumber(e.stockInRMAVar)+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.totalOnHandValue:n.me.getCurrency(e.totalOnHandValue)+"("+n.me.getNumber(n.me.getCurrency(e.totalOnHandValueVar))+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(n.isTitle?e.totalInPartsValue:n.me.getCurrency(e.totalInPartsValue)+"("+n.me.getNumber(n.me.getCurrency(e.totalInPartsValueVar))+")")}).insert({bottom:new Element(n.tag,{"class":"col-xs-1"}).update(e.comments)}).insert({bottom:new Element(n.tag,{"class":"text-right btns col-xs-1 hidden"}).update(n.isTitle===!0?new Element("span",{"class":"btn btn-primary btn-xs",title:"New"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-plus"})}).insert({bottom:" NEW"}).observe("click",function(){$(this).up("thead").insert({bottom:n.newEditEl=n.me._getEditPanel({})}),n.newEditEl.down(".form-control[save-item-panel]").focus(),n.newEditEl.down(".form-control[save-item-panel]").select(),n.newEditEl.getElementsBySelector(".form-control[save-item-panel]").each(function(e){e.observe("keydown",function(e){return n.me.keydown(e,function(){n.newEditEl.down(".btn-success span").click()}),!1})})}):new Element("span",{"class":"btn-group btn-group-xs"}).insert({bottom:new Element("span",{"class":"btn btn-default",title:"Edit"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-pencil"})}).observe("click",function(){$(this).up(".item_row").replace(n.editEl=n.me._getEditPanel(e)),n.editEl.down(".form-control[save-item-panel]").focus(),n.editEl.down(".form-control[save-item-panel]").select(),n.editEl.getElementsBySelector(".form-control[save-item-panel]").each(function(e){e.observe("keydown",function(e){return n.me.keydown(e,function(){n.editEl.down(".btn-success span").click()}),!1})})})}).insert({bottom:new Element("span",{"class":"btn btn-danger",title:"Delete"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-trash"})}).observe("click",function(){return confirm("Are you sure you want to delete this item?")?void n.me._deleteItem(e):!1})}))}),n.row}});