var BPCPageJs=new Class.create();BPCPageJs.prototype={modalId:"page_modal_box_id",_ajaxRequest:null,callbackIds:{},initialize:function(){},setCallbackId:function(a,b){this.callbackIds[a]=b;return this;},getCallbackId:function(a){if(this.callbackIds[a]===undefined||this.callbackIds[a]===null){throw"Callback ID is not set for:"+a;}return this.callbackIds[a];},postAjax:function(d,c,e,b){var a={};a.me=this;a.me._ajaxRequest=new Prado.CallbackRequest(d,e);a.me._ajaxRequest.setCallbackParameter(c);a.timeout=(b||30000);if(a.timeout<30000){a.timeout=30000;}a.me._ajaxRequest.setRequestTimeOut(a.timeout);a.me._ajaxRequest.dispatch();return a.me._ajaxRequest;},abortAjax:function(){if(tmp.me._ajaxRequest!==null){tmp.me._ajaxRequest.abort();}},getResp:function(b,a,d){var c={};c.expectNonJSONResult=(a!==true?false:true);c.result=b;if(c.expectNonJSONResult===true){return c.result;}if(!c.result||!c.result.isJSON()){return;}c.result=c.result.evalJSON();if(c.result.errors.size()!==0){c.error="Error: \n\n"+c.result.errors.join("\n");if(d===true){throw c.error;}else{return alert(c.error);}}return c.result.resultData;},getCurrency:function(f,c,b,a,e){var d={};d.decimal=(isNaN(b=Math.abs(b))?2:b);d.dollar=(c==undefined?"$":c);d.decimalPoint=(a==undefined?".":a);d.thousandPoint=(e==undefined?",":e);d.sign=(f<0?"-":"");d.Int=parseInt(f=Math.abs(+f||0).toFixed(d.decimal))+"";d.j=(d.j=d.Int.length)>3?d.j%3:0;return d.dollar+d.sign+(d.j?d.Int.substr(0,d.j)+d.thousandPoint:"")+d.Int.substr(d.j).replace(/(\d{3})(?=\d)/g,"$1"+d.thousandPoint)+(d.decimal?d.decimalPoint+Math.abs(f-d.Int).toFixed(d.decimal).slice(2):"");},getValueFromCurrency:function(a){if(!a){return"";}return a.replace(/\s*/g,"").replace(/\$/g,"").replace(/,/g,"");},keydown:function(d,a,b,e){var c={};c.keyValue=e?e:13;if(!((d.which&&d.which==c.keyValue)||(d.keyCode&&d.keyCode==c.keyValue))){if(typeof(b)==="function"){b();}return true;}if(typeof(a)==="function"){a();}return false;},getAlertBox:function(b,a){return new Element("div",{"class":"alert alert-dismissible",role:"alert"}).insert({bottom:new Element("button",{"class":"close","data-dismiss":"alert"}).insert({bottom:new Element("span",{"aria-hidden":"true"}).update("&times;")}).insert({bottom:new Element("span",{"class":"sr-only"}).update("Close")})}).insert({bottom:new Element("strong").update(b)}).insert({bottom:a});},_signRandID:function(a){if(!a.id){a.id="input_"+String.fromCharCode(65+Math.floor(Math.random()*26))+Date.now();}return this;},_markFormGroupError:function(a,c){var b={};b.me=this;if(a.up(".form-group")){a.store("clearErrFunc",function(d){a.up(".form-group").removeClassName("has-error");jQuery("#"+a.id).tooltip("hide").tooltip("destroy").show();}).up(".form-group").addClassName("has-error");b.me._signRandID(a);jQuery("#"+a.id).tooltip({trigger:"manual",placement:"auto",container:"body",placement:"bottom",html:true,title:c}).tooltip("show");$(a).observe("change",function(){b.func=$(a).retrieve("clearErrFunc");if(typeof(b.func)==="function"){b.func();}});}return b.me;},_collectFormData:function(a,c,d){var b={};b.me=this;b.data={};b.hasError=false;$(a).getElementsBySelector("["+c+"]").each(function(e){b.groupIndexName=d?e.readAttribute(d):null;b.fieldName=e.readAttribute(c);if(e.hasAttribute("required")&&$F(e).blank()){b.me._markFormGroupError(e,"This is requried");b.hasError=true;}b.itemValue=e.readAttribute("type")!=="checkbox"?$F(e):$(e).checked;if(e.hasAttribute("validate_currency")||e.hasAttribute("validate_number")){if(b.me.getValueFromCurrency(b.itemValue).match(/^\d+(\.\d{1,2})?$/)===null){b.me._markFormGroupError(e,(e.hasAttribute("validate_currency")?e.readAttribute("validate_currency"):e.hasAttribute("validate_number")));b.hasError=true;}b.value=b.me.getValueFromCurrency(b.itemValue);}if(b.groupIndexName!==null&&b.groupIndexName!==undefined){if(!b.data[b.groupIndexName]){b.data[b.groupIndexName]={};}b.data[b.groupIndexName][b.fieldName]=b.itemValue;}else{b.data[b.fieldName]=b.itemValue;}});return(b.hasError===true?null:b.data);},showModalBox:function(d,c,b,e){var a={};a.me=this;a.isSM=(b===true?true:false);a.footer=(e?e:null);a.newBox=new Element("div",{"class":"modal",tabindex:"-1",role:"dialog","aria-hidden":"true","aria-labelledby":"page-modal-box"}).insert({bottom:new Element("div",{"class":"modal-dialog "+(a.isSM===true?"modal-sm":"modal-lg")}).insert({bottom:new Element("div",{"class":"modal-content"}).insert({bottom:new Element("div",{"class":"modal-header"}).insert({bottom:new Element("div",{"class":"close",type:"button","data-dismiss":"modal"}).insert({bottom:new Element("span",{"aria-hidden":"true"}).update("&times;")})}).insert({bottom:new Element("strong",{"class":"modal-title",id:"page-modal-box"}).update(d)})}).insert({bottom:new Element("div",{"class":"modal-body"}).update(c)}).insert({bottom:a.footer===null?"":new Element("div",{"class":"modal-footer"}).update(a.footer)})})});if($(a.me.modalId)){$(a.me.modalId).remove();}$$("body")[0].insert({bottom:a.newBox.writeAttribute("id",a.me.modalId)});jQuery("#"+a.me.modalId).modal({show:true,target:"#"+a.me.modalId});return a.me;},hideModalBox:function(){var a={};a.me=this;jQuery("#"+a.me.modalId).modal("hide");return a.me;},getLoadingImg:function(){return Element("span",{"class":"loading-img fa fa-refresh fa-5x fa-spin"});},loadUTCTime:function(a){var b={};b.strings=a.strip().split(" ");b.dateStrings=b.strings[0].split("-");b.timeStrings=b.strings[1].split(":");return new Date(Date.UTC(b.dateStrings[0],(b.dateStrings[1]*1-1),b.dateStrings[2],b.timeStrings[0],b.timeStrings[1],b.timeStrings[2]));}};