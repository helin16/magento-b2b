var BPCPageJs=new Class.create;BPCPageJs.prototype={modalId:"page_modal_box_id",_htmlIDs:{},_ajaxRequest:null,callbackIds:{},initialize:function(){},setCallbackId:function(e,t){return this.callbackIds[e]=t,this},getCallbackId:function(e){if(void 0===this.callbackIds[e]||null===this.callbackIds[e])throw"Callback ID is not set for:"+e;return this.callbackIds[e]},setHTMLID:function(e,t){var r={};return r.me=this,r.me._htmlIDs[e]=t,r.me},getHTMLID:function(e){var t={};return t.me=this,t.me._htmlIDs[e]},postAjax:function(e,t,r,a){var o={};return o.me=this,o.me._ajaxRequest=new Prado.CallbackRequest(e,r),o.me._ajaxRequest.setCallbackParameter(t),o.timeout=a||3e4,o.timeout<3e4&&(o.timeout=3e4),o.me._ajaxRequest.setRequestTimeOut(o.timeout),o.me._ajaxRequest.dispatch(),o.me._ajaxRequest},abortAjax:function(){null!==tmp.me._ajaxRequest&&tmp.me._ajaxRequest.abort()},getResp:function(e,t,r){var a={};if(a.expectNonJSONResult=t!==!0?!1:!0,a.result=e,a.expectNonJSONResult===!0)return a.result;if(a.result&&a.result.isJSON()){if(a.result=a.result.evalJSON(),0!==a.result.errors.size()){if(a.error="Error: \n\n"+a.result.errors.join("\n"),r===!0)throw a.error;return alert(a.error)}return a.result.resultData}},getCurrency:function(e,t,r,a,o){var n={};return n.decimal=isNaN(r=Math.abs(r))?2:r,n.dollar=void 0==t?"$":t,n.decimalPoint=void 0==a?".":a,n.thousandPoint=void 0==o?",":o,n.sign=0>e?"-":"",n.Int=parseInt(e=Math.abs(+e||0).toFixed(n.decimal))+"",n.j=(n.j=n.Int.length)>3?n.j%3:0,n.dollar+n.sign+(n.j?n.Int.substr(0,n.j)+n.thousandPoint:"")+n.Int.substr(n.j).replace(/(\d{3})(?=\d)/g,"$1"+n.thousandPoint)+(n.decimal?n.decimalPoint+Math.abs(e-n.Int).toFixed(n.decimal).slice(2):"")},getValueFromCurrency:function(e){return e?(e+"").replace(/\s*/g,"").replace(/\$/g,"").replace(/,/g,""):""},keydown:function(e,t,r,a){var o={};return o.keyValue=a?a:13,e.which&&e.which==o.keyValue||e.keyCode&&e.keyCode==o.keyValue?("function"==typeof t&&t(),!1):("function"==typeof r&&r(),!0)},getAlertBox:function(e,t){return new Element("div",{"class":"alert alert-dismissible",role:"alert"}).insert({bottom:new Element("button",{"class":"close","data-dismiss":"alert"}).insert({bottom:new Element("span",{"aria-hidden":"true"}).update("&times;")}).insert({bottom:new Element("span",{"class":"sr-only"}).update("Close")})}).insert({bottom:new Element("strong").update(e)}).insert({bottom:t})},_signRandID:function(e){return e.id||(e.id="input_"+String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()),this},_markFormGroupError:function(e,t){var r={};return r.me=this,e.up(".form-group")&&(e.store("clearErrFunc",function(){e.up(".form-group").removeClassName("has-error"),jQuery("#"+e.id).tooltip("hide").tooltip("destroy").show()}).up(".form-group").addClassName("has-error"),r.me._signRandID(e),jQuery("#"+e.id).tooltip({trigger:"manual",placement:"auto",container:"body",placement:"bottom",html:!0,title:t,content:t}).tooltip("show"),$(e).observe("change",function(){r.func=$(e).retrieve("clearErrFunc"),"function"==typeof r.func&&r.func()})),r.me},_collectFormData:function(e,t,r){var a={};return a.me=this,a.data={},a.hasError=!1,$(e).getElementsBySelector("["+t+"]").each(function(e){a.groupIndexName=r?e.readAttribute(r):null,a.fieldName=e.readAttribute(t),e.hasAttribute("required")&&$F(e).blank()&&(a.me._markFormGroupError(e,"This is requried"),a.hasError=!0),a.itemValue="checkbox"!==e.readAttribute("type")?$F(e):$(e).checked,(e.hasAttribute("validate_currency")||e.hasAttribute("validate_number"))&&(null===a.me.getValueFromCurrency(a.itemValue).match(/^(-)?\d+(\.\d{1,4})?$/)&&(a.me._markFormGroupError(e,e.hasAttribute("validate_currency")?e.readAttribute("validate_currency"):e.hasAttribute("validate_number")),a.hasError=!0),a.value=a.me.getValueFromCurrency(a.itemValue)),null!==a.groupIndexName&&void 0!==a.groupIndexName?(a.data[a.groupIndexName]||(a.data[a.groupIndexName]={}),a.data[a.groupIndexName][a.fieldName]=a.itemValue):a.data[a.fieldName]=a.itemValue}),a.hasError===!0?null:a.data},showModalBox:function(e,t,r,a,o){var n={};return n.me=this,n.isSM=r===!0?!0:!1,n.footer=a?a:null,n.newBox=new Element("div",{"class":"modal",tabindex:"-1",role:"dialog","aria-hidden":"true","aria-labelledby":"page-modal-box"}).insert({bottom:new Element("div",{"class":"modal-dialog "+(n.isSM===!0?"modal-sm":"modal-lg")}).insert({bottom:new Element("div",{"class":"modal-content"}).insert({bottom:new Element("div",{"class":"modal-header"}).insert({bottom:new Element("div",{"class":"close",type:"button","data-dismiss":"modal"}).insert({bottom:new Element("span",{"aria-hidden":"true"}).update("&times;")})}).insert({bottom:new Element("strong",{"class":"modal-title",id:"page-modal-box"}).update(e)})}).insert({bottom:new Element("div",{"class":"modal-body"}).update(t)}).insert({bottom:null===n.footer?"":new Element("div",{"class":"modal-footer"}).update(n.footer)})})}),$(n.me.modalId)&&$(n.me.modalId).remove(),$$("body")[0].insert({bottom:n.newBox.writeAttribute("id",n.me.modalId)}),n.modal=jQuery("#"+n.me.modalId),o&&"object"==typeof o&&$H(o).each(function(e){n.modal.on(e.key,e.value)}),n.modal.modal({show:!0,target:"#"+n.me.modalId}),n.me},hideModalBox:function(){var e={};return e.me=this,jQuery("#"+e.me.modalId).modal("hide"),e.me},getLoadingImg:function(){return Element("span",{"class":"loading-img fa fa-refresh fa-5x fa-spin"})},loadUTCTime:function(e){var t={};return t.strings=e.strip().split(" "),t.dateStrings=t.strings[0].split("-"),t.timeStrings=t.strings[1].split(":"),new Date(Date.UTC(t.dateStrings[0],1*t.dateStrings[1]-1,t.dateStrings[2],t.timeStrings[0],t.timeStrings[1],t.timeStrings[2]))},observeClickNDbClick:function(e,t,r){var a={};return a.me=this,$(e).observe("click",function(a){$(e).retrieve("alreadyclicked")===!0?($(e).store("alreadyclicked",!1),$(e).retrieve("alreadyclickedTimeout")&&clearTimeout($(e).retrieve("alreadyclickedTimeout")),"function"==typeof r&&r(a)):($(e).store("alreadyclicked",!0),$(e).store("alreadyclickedTimeout",setTimeout(function(){$(e).store("alreadyclicked",!1),"function"==typeof t&&t(a)},300)))}),a.me}};